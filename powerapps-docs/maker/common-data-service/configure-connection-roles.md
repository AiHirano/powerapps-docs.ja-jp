---
title: つながりロールを構成する | MicrosoftDocs
ms.custom: ''
ms.date: 05/27/2018
ms.reviewer: ''
ms.service: crm-online
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
applies_to:
- Dynamics 365 (online)
- Dynamics 365 Version 9.x
- PowerApps
ms.author: matp
manager: brycho
ms.openlocfilehash: 4faf195f1c751e3796267d52725c1cb753c4889d
ms.sourcegitcommit: aba996b1773ecdf62758e06b34eaf57bede29e08
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/08/2018
ms.locfileid: "39696076"
---
# <a name="configure-connection-roles"></a>つながりロールを構成する

Common Data Service for Apps を使用すると、エンティティ リレーションシップを作成することなくエンティティ レコード間の**つながり**を定義できます。 モデル駆動型アプリでは、レコード間の名前付きリンクを作成して、正式ではないリレーションシップを確立することができます。これは実際のエンティティ リレーションシップを作成することにはなりません。 たとえば、"*友人*"、"*兄弟*"、"*配偶者*"、"*出席者*"、"*利害関係者*" などです。 相互関係のつながりを作成することもできます。たとえば "*子*" と "*親*"、"*夫*" と "*妻*"、"*医者*" と "*患者*" などです。

2 つのレコード間につながりを設定するときに、リレーションシップの開始日と終了日などの説明や追加情報を追加することもできます。 詳細情報: [レコード間の関連付けを定義および表示するために接続を作成する](/dynamics365/customer-engagement/basics/create-connections-view-relationships-between-records)

**つながりロール** エンティティへのアクセス権を持つユーザーはだれでも、どのつながりが使用可能かを確立することができます。

## <a name="view-connection-roles"></a>つながりロールを表示する

CDS for Apps には、構成済みの標準つながりロールが多数用意されています。 これらを表示するには、[設定] 領域に移動する必要があります。 

### <a name="navigate-to-the-settings-area"></a>[設定] 領域に移動する

1. モデル駆動型アプリの表示中に、URL を編集して `dynamics.com` 以降の部分をすべて削除し、ページを更新します。
1. **[設定]** > **[ビジネス]** > **[ビジネス管理]** の順に移動した後、**[つながりロール]** を選択します。

![ビジネス管理設定のつながりロール](media/navigate-settings-connection-roles.png)

この環境で利用できるすべてのつながりロールがこのビューに表示され、またここで編集することができます。

> [!NOTE]
> ソリューションと共につながりロールを配布する場合は、配布するソリューションにつながりロールが含まれていることを確認します。 詳細情報: [ソリューションへのつながりロールの追加](#add-connection-roles-to-a-solution)

## <a name="view-connection-roles-in-the-solution-explorer"></a>ソリューション エクスプローラーでつながりロールを表示する。

つながりロールは "*ソリューション対応*"、つまりソリューションに含めることができるため、配布するソリューションにつながりロールを含めることもできます。

[!INCLUDE [cc_navigate-solution-from-powerapps-portal](../../includes/cc_navigate-solution-from-powerapps-portal.md)]

**[設定]** 領域に表示されるつながりロールのほとんどは、"*内部の*" **[既定のソリューション]** 内で定義されます (**[Common Data Service の既定のソリューション]** と混同しないようにしてください)。 この内部の **[既定のソリューション]** には、システム内のすべてのカスタマイズが含まれています。 **[既定のソリューション]** を表示するには、**[すべてのソリューション - 内部]** ビューを選択します。

## <a name="add-connection-roles-to-a-solution"></a>ソリューションへのつながりロールの追加

一般的に、内部の **[既定のソリューション]** 内のコンポーネントを編集することはお勧めしません。 **[Common Data Service の既定のソリューション]**、または作業用に作成した任意のソリューション内で、**[既存の追加]** コマンドを使用して任意の既定のつながりロールをソリューションに追加できます。

![既存のつながりロールを追加する](media/add-existing-connection-role.png)

ソリューションにつながりロールを追加したら、表示される場所ならどこでもそれを編集できるようになります。

## <a name="create-or-edit-connection-roles"></a>つながりロールを作成または編集する。

> [!IMPORTANT]
> ソリューションに新しいつながりロールや既存のつながりロールへの変更を含めて配布する場合は、配布するソリューションにそれらを追加する必要があります。 **[設定]** 領域を使用して新しいつながりロールを編集または追加すると、これらのつながりロールは内部の **[既定のソリューション]** に追加されます。配布するソリューションには、最初にこれらをソリューションに追加しない限り、含まれません。 詳細情報: [ソリューションへのつながりロールの追加](#add-connection-roles-to-a-solution)

**[つながりロール]** の一覧からつながりロールのいずれかを選択して、これを編集します。
フォーム内で明確に示されているように、つながりロールの定義は 3 つの手順に分かれています。

![つながりロールの作成フォーム](media/create-connection-role-form.png)

### <a name="describe-the-connection-role"></a>つながりロールについて説明する

次のフィールドを設定します。

|フィールド|説明|
|--|--|
|**Name**|(必須) つながりについて説明するテキスト。|
|**つながりロール カテゴリ**|つながりのカテゴリについて説明するグループ。 詳細情報: [つながりロール カテゴリ値](#connection-role-category-values)|
|**Description**|ロールの定義を指定します。|

#### <a name="connection-role-category-values"></a>つながりロール カテゴリの値

**[つながりロール カテゴリ]** の規定値は次のとおりです。
- Business
- Family
- ソーシャル
- セールス
- その他
- 利害関係者
- 営業チーム
- サービス

新しいカテゴリを追加したり、**[カテゴリ]** のグローバル オプション セットを編集することで既存のカテゴリを変更したりできます。 詳細情報: [Common Data Service for Apps のグローバル オプション セットを作成および編集する (候補リスト)](create-edit-global-option-sets.md)

### <a name="select-record-types"></a>レコードの種類を選択する

つながりを可能にするレコードの種類を選択します。

> [!NOTE]
> 既定では **[すべて]** が選択されていますが、追加するつながりロールに対してどの種類が適切であるか検討する必要があります。

### <a name="matching-connection-roles"></a>対応するつながりロール

この省略可能な手順では、相互関係として適用されるロールを定義することができます。 必須ではありませんが、これらを定義するとつながりの意味がより明確になります。

たとえば、Glen が Mary の "*友人*" であると設定した場合、これは Mary が Glen の "*友人*" であることも意味するでしょうか。 そうであることを願います。 しかし、Glen が Mary の "*父親*" であった場合、これは Mary が Glen の "*父親*" であることは意味しません。 正しい相互関係を設定するには、この追加手順が必要です。

対応するつながりロールを持たないつながりロールを設定した場合、そのロールが表示されるのは、つながりを適用したレコードからつながりを表示したときのみです。 つながれたレコードから表示すると、対応するロールを設定しない限りロールは表示されません。

"*友人*"、"*配偶者*"、"*同僚*"、"*兄弟*" のようなロール定義の場合は、対応するロールをそれ自体に設定することをお勧めします。 対応するつながりロールを 1 つ構成すると、その 1 つの対応するつながりロールは双方向に適用されます。

> [!IMPORTANT]
> 対応するつながりロールをそれ自体に設定する前に、対応するつながりロールなしで新しいつながりロールを保存する必要があります。

一部のつながりロールは、既に対応するつながりロールを構成されています。 "*以前の社員*" は "*以前の雇用主*" と対応付けられており、その逆も同様です。 この種の一対一の対応するつながりロールが最も一般的です。

複雑なリレーションシップを表現するために、複数の対応するつながりロールを構成することができます。 "*父親*" のようなつながりロールを作成する場合、さらに "*娘*" や "*息子*" のようなロールを 2 つ構成して、それらを両方とも "*父親*" の対応するつながりロールとして適用することができます。 次に、両方のつながりロール "*娘*" と "*息子*" を、"*父親*" に対応付ける必要があります。 もちろん、"*母親*" 用に同等のロールを設定する必要もあります。これは "*娘*" や "*息子*" と同じように対応付けられます。

> [!TIP]
> 複雑なつながりロールのセットを作成する前に、もっと単純なロールのセットを使用できないかどうかを検討してください。 たとえば、"*父親*"、"*母親*"、"*息子*"、"*娘*" のように複雑なつながりロールのセットを作成するのではなく、単純に "*親*" と "*子*" というロールを使用できないかどうかを検討します。

対応するつながりロールが複数構成されている場合、これらのつながりロールのみが有効な相互関係ロールを表しています。 1 つ目が既定値として自動的に適用されます。 既定値が正しくない場合は、ユーザーが手動でつながりを編集し、構成で定義されている有効なオプションから選択する必要があります。

### <a name="see-also"></a>関連項目
<!-- This is in the basics guide. It needs to be migrated -->
[レコード間の関連付けを定義および表示するために接続を作成する](/dynamics365/customer-engagement/basics/create-connections-view-relationships-between-records)<br />
[Common Data Service for Apps のグローバル オプション セットを作成および編集する (候補リスト)](create-edit-global-option-sets.md)<br />
[エンティティ間のリレーションシップの作成と編集](create-edit-entity-relationships.md)


