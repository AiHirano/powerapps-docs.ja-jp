---
title: ソリューションの概要 | Microsoft Docs
description: ソリューションを使用してモデル アプリを作成する方法について説明します。
services: ''
suite: powerapps
documentationcenter: na
author: JimDaly
manager: faisalmo
editor: ''
tags: ''
ms.service: powerapps
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 03/19/2018
ms.author: jdaly
ms.openlocfilehash: b9e06888a23426a44eeaf4354bf456dd8b15cfad
ms.sourcegitcommit: 59785e9e82da8f5bd459dcb5da3d5c18064b0899
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/22/2018
---
# <a name="introduction-to-solutions"></a>ソリューションの概要

"*ソリューション*" とは、カスタマイザーおよび開発者が、Common Data Service for Apps を拡張した単体ソフトウェアを作成、パッケージ化、および保守する方法です。 カスタマイザーおよび開発者は、ソリューションによって定義されたビジネス機能を組織が Common Data Service for Apps を使用してインストールおよびアンインストールできるようにソリューションを配布します。

Common Data Service for Apps に対するカスタマイズはすべて、ソリューションの一部として行われます。 適用した変更はすべて追跡され、依存関係が存在する場合は計算されます。 マネージド ソリューションをエクスポートすると、そのソリューションに適用したすべての変更を含むファイルが作成され、そのファイルを別の Common Data Service for Apps 環境にインポートできるようになります。

異なる Common Data Service for Apps 環境間でカスタマイズまたは拡張機能を転送したり、AppSource を使用してソリューションを配布したりする予定がある場合は、ソリューションのフレームワークを理解する必要があります。

## <a name="unmanaged-and-managed-solutions"></a>マネージド ソリューションとアンマネージド ソリューション

ソリューションには、*マネージド* ソリューションと*アンマネージド* ソリューションの 2 種類があります。

**マネージド** ソリューションとは、配布またはインストールを目的とする完成したソリューションです。 
- マネージド ソリューションのコンポーネントを編集することはできません。
- マネージド ソリューションをエクスポートすることはできません。
- マネージド ソリューションのコンポーネントには、アンマネージド カスタマイズを追加できます。 この作業を行う場合は、アンマネージド カスタマイズとマネージド ソリューションとの間に依存関係を作成します。 依存関係が存在する場合は、依存関係を削除するまで、マネージド ソリューションをアンインストールすることはできません。
- マネージド ソリューションを削除 (アンインストール) すると、マネージド ソリューションと共に、それに含まれているすべてのカスタマイズおよび拡張機能も削除されます。

 > [!IMPORTANT]
 > マネージド ソリューションをアンインストールすると、次のデータが失われます: マネージド ソリューションの一部であるカスタム エンティティに格納されたデータ、およびマネージド ソリューションの一部ではない他のエンティティ上にあるマネージド ソリューションの一部であるカスタム属性に格納されたデータ。

**アンマネージド** ソリューションとは、まだ開発中のソリューション、または配布することを目的としていないソリューションのことです。 
- アンマネージド ソリューションの場合は、ソリューションに対するコンポーネントの追加および削除を引き続き行うことができます。 
- アンマネージド ソリューションをエクスポートすると、異なる環境間でアンマネージド カスタマイズを転送することができます。
- アンマネージド ソリューションを削除した場合は、それに含まれているカスタマイズのソリューション コンテナーのみが削除されます。 アンマネージド カスタマイズは引き続き有効であり、既定のソリューションに属しています。 
- 完成したアンマネージ ソリューションを配布する場合は、それをマネージド ソリューションとしてエクスポートします。

 > [!NOTE]
 > マネージド ソリューションを、その元になったアンマネージド ソリューションと同じ環境にインポートすることはできません。 マネージド ソリューションをテストするには、別の環境にインポートする必要があります。

## <a name="solution-publishers"></a>ソリューション発行者
各ソリューションは、ソリューション発行者にリンクされます。 ソリューション発行者からは、発行者への問い合わせ方法に関する情報およびカスタマイズ接頭辞の値が提供されます。 既定値は `new` です。

スキーマの変更をソリューションの一部として取り込むと、スキーマ アイテムの名前の先頭に、ソリューション発行者のカスタマイズ接頭辞が追加されます。 カスタム アクションにも、この値が追加されます。 スキーマ アイテムまたはカスタム アクションが追加されたソリューションを容易に認識できることから、この値は重要です。 1 つのソリューション内のすべてのスキーマ アイテムおよびカスタム アクションに同じカスタマイズ接頭辞を使用することは必須ではありませんが、強くお勧めします。

> [!IMPORTANT]
> ソリューションの作成を開始するには、事前に、ソリューション発行者レコードを作成し、これにリンクする新しいソリューションを作成しておく必要があります。 カスタマイズ接頭辞が意味のある値になっていることを確認してください。 

配布したソリューションに対する更新プログラムを発行する場合は、ソリューション発行者の選択が重要となります。 更新プログラムは、元のマネージド ソリューションと同じ発行者が選択されたマネージド ソリューションにのみ適用されます。 

詳細情報: [Dynamics 365 Customer Engagement の開発者ガイド: マネージド ソリューションの保守 > マネージド ソリューション更新の作成](/dynamics365/customer-engagement/developer/maintain-managed-solutions#create-managed-solution-updates)

## <a name="create-a-solution-publisher-and-solution"></a>ソリューション発行者とソリューションを作成する 

ソリューション発行者とソリューションを作成するには、Dynamics 365 の [カスタマイズ] 領域に移動する必要があります。

[powerapps.com](https://web.powerapps.com) から

1. 左上隅にある *[ワッフル]* アイコンを選択します。
2. ナビゲーション用メニューで、**[すべてのアプリ]** を選択します。
3. **[Dynamics 365 - カスタム アプリ]** を探します。
 省略記号 (...) をクリックし、**[Pin this app]\(このアプリを固定する\)** を選択することをお勧めします。次回から簡単に移動できるようになります。
4. **[Dynamics 365 - カスタム アプリ]** アプリをクリックして、これを選択します。
5. **[設定]** > **[カスタマイズ]** > **[カスタマイズ]** の順に移動します。

[home.dynamics.com](http://home.dynamics.com/) から

1. **[Dynamics 365 - カスタム]** タイルを探し、それをクリックします。
2. **[設定]** > **[カスタマイズ]** > **[カスタマイズ]** の順に移動します。

### <a name="create-a-solution-publisher"></a>ソリューション発行者を作成する

1. カスタマイズ領域から、**[発行者]** を選択します。
2. **[新規]** をクリックします。
3. 発行者のフォームに、「**表示名**」と入力します。 **[名前]** の値が表示名に基づいて生成されるようになります。 生成された値をそのまま使用することも、新しい値を指定することもできます。
4. **[接頭辞]** フィールドで、ソリューションを開発する際に追加するカスタム スキーマ アイテムに付加する必要があるカスタマイズ接頭辞を指定します。 既定値は `new` です。 ご自身の組織を表す値を選択します。それにより、ユーザーはシステムにインストールされているどのコンポーネントがその組織のソリューションに由来するものであるかを容易に認識できるようになります。
5. **[オプション値の接頭辞]** の値は、選択したカスタマイズ接頭辞に基づいて生成されます。 これは、ソリューション内の属性に追加するオプションセット オプションの値に追加される値です。 この値により、ソリューションに追加する任意のオプションを容易に識別することができます。
6. フォームの **[連絡先の詳細]** セクションには、ソリューションをインストールするユーザーに提供する任意の連絡先情報を追加することができます。
7. 終了したら、**[保存して閉じる]** をクリックします。

### <a name="create-a-solution"></a>ソリューションを作成する

1. [カスタマイズ] 領域から、**[ソリューション]** を選択します。
2. **[新規]** をクリックします。
3. ソリューションのフォームに、「**表示名**」と入力します。 **[名前]** の値が表示名に基づいて生成されるようになります。 生成された値をそのまま使用することも、新しい値を指定することもできます。
4. **[発行者]** フィールドで、「[ソリューション発行者を作成する](#create-a-solution-publisher)」で作成した発行者を探します。
5. **[バージョン]** フィールドで、ソリューションに適したバージョン (1.0.0.0 など) を選択します。
6. 終了したら、**[保存]** をクリックします。

> [!IMPORTANT]
> このソリューションに含める新しいソリューション コンポーネントを作成する場合には、このソリューションを使用するか、または同じソリューション発行者に関連付けられた別のソリューションを使用してコンポーネントを追加します。
> このソリューションには、別のソリューション発行者に関連付けられたソリューションのコンテキストで作成されたソリューション コンポーネントを追加することができますが、そのようなコンポーネントには一貫性のないカスタマイズ接頭辞の値が設定されている場合があります。

## <a name="solution-layering"></a>ソリューション階層

互いに矛盾している 2 つのマネージド ソリューションをインストールしたり、環境に適用された一部のカスタマイズでマネージド ソリューションを上書きしたりすることができます。 これはどのような仕組みなのでしょうか。

Common Data Service for Apps ではマネージド ソリューションをインストールされた順に評価し、マネージド ソリューションに属していないカスタマイズを最後に評価するために、それは機能します。

次の図では、マネージド ソリューションとアンマネージド カスタマイズがやり取りして、実行時にアプリケーションに含めるものを制御する方法について紹介します。

![ソリューションの階層を示す図](media/solution-layering.png)

この例では、システムのソリューションで定義されている既定の動作は、マネージド ソリューションによって上書きまたは追加されます。 アンマネージド カスタマイズは、アプリケーション内で表示されるカスタマイズを上書きまたは追加することができます。

詳細情報: [Dynamics 365 Customer Engagement の開発者ガイド: ソリューションの概要 > アンマネージド ソリューションとマネージド ソリューション](/dynamics365/customer-engagement/developer/introduction-solutions#unmanaged-and-managed-solutions)

## <a name="managed-properties"></a>マネージド プロパティ

マネージド ソリューションを配布した場合、そのソリューションをインストールするユーザーは誰もが、独自のアンマネージド カスタマイズをそのソリューションに含めることができます。 さらに、ユーザーはそのようなアンマネージド カスタマイズを、インストールしたソリューションに依存するマネージド ソリューションとして配布するソリューションに追加することができます。 ただし、そのようなことをユーザーにさせたくない場合はどうなのでしょうか。 マネージド ソリューション発行者として、マネージド プロパティを使用することで、ご自身のマネージド ソリューションのコンポーネントに対する特定のカスタマイズを無効にすることができます。

詳細情報: [Dynamics 365 Customer Engagement の開発者ガイド: マネージド プロパティの使用](/dynamics365/customer-engagement/developer/use-managed-properties)

## <a name="modular-solutions"></a>モジュール型ソリューション

ソリューション フレームワークを使用して、一連の機能を提供する個別のコンポーネント セットを作成することができます。 各マネージド ソリューションをインストールできると共に、アンインストールして顧客の配置を元の状態に戻すこともできます。 作成した各マネージド ソリューションは、システム ソリューションの最上位で実行され、その基になるソリューションの機能にアクセスできます。

また、他のソリューションの最上位で実行されるマネージド ソリューションをビルドすることで、さまざまなソリューションで共有できる機能セットを作成することもできます。 このように、複数のソリューションをサポートする共通のモジュールをソリューションとしてビルドし保守することができます。 このため、顧客には状況に合わせて適切なソリューションのみをインストールしてもらえばよく、すべてのソリューションに同じ共有機能を含める必要はありません。 複数のソリューションをサポートするソリューションに更新プログラムをプッシュする必要がある場合は、共通のモジュールを更新するだけで済みます。

顧客、システム導入担当者、およびその他の ISV は、提供されたソリューションの最上位にソリューションをビルドして、それぞれが必要とする特定のカスタマイズを実現することができます。

ビジネス機能セットが複数のソリューションで構成される場合、これらをパッケージと呼びます。 *Package Deployer* を使用すれば、複数のソリューションを単一のインストール可能なユニットに結合できます。

## <a name="deploy-solution-packages"></a>ソリューション パッケージの配置

*Package Deployer* を使用して、以下のものを取り込み可能なパッケージのカスタム インストーラーを作成します。 
- 1 つまたは複数のソリューション ファイル。
- フラット ファイルまたはエクスポートされた構成データ ファイル。 
- パッケージの配置前、配置中、または配置後に実行できるカスタム コード。
- 配置プロセスの最初と最後で表示できるパッケージに固有の HTML コンテンツ。 これは、パッケージで配置されるソリューションおよびファイルの内容を説明するのに役立ちます。

詳細情報: [Dynamics 365 Customer Engagement の開発者ガイド: Dynamics 365 Package Deployer 用のパッケージを作成する](/dynamics365/customer-engagement/developer/create-packages-package-deployer)

## <a name="team-development-of-solutions"></a>ソリューションのチーム開発

ソリューション ファイルは、ソース コードの制御またはチーム開発に適していない単一のバイナリ ファイルです。 複数の開発者がソリューション内のカスタム コンポーネントで作業する方法はありません。

*SolutionPackager* ツールを使用すれば、ソリューション ファイルのソース コード制御およびチーム開発に関する問題を解決できます。 このツールでは、圧縮されたソリューション ファイル内の個々のコンポーネントを識別し、それらを個別のファイルに抽出できます。 また、以前に展開されているファイルをパッキングすることによってソリューション ファイルを再作成することもできます。 これにより、複数のユーザーが単一のソリューションで独立して作業し、加えた変更内容を共通の場所に抽出することができます。 ソリューション ファイル内の各コンポーネントは複数のファイルに分割されるため、以前の変更を上書きすることなくカスタマイズをマージできるようになります。 二次的な使用として、SolutionPackager ツールを自動ビルド プロセスから呼び出せば、アクティブな Dynamics 365 インスタンスを必要とすることなく、以前に抽出されたコンポーネント ファイルから圧縮ソリューション ファイルを生成することができます。

詳細情報: [Dynamics 365 Customer Engagement の開発者ガイド: チーム開発のソリューション ツール](/dynamics365/customer-engagement/developer/solution-tools-team-development)

### <a name="see-also"></a>関連項目

[Common Data Service for Apps Developer の概要](overview.md)