---
title: "環境とテナント間での PowerApps の移行 | Microsoft Docs"
description: "環境とテナント間でのアプリの移行"
services: 
suite: powerapps
documentationcenter: na
author: jamesol-msft
manager: anneta
editor: 
tags: 
ms.service: powerapps
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 07/28/2017
ms.author: jamesol
ms.openlocfilehash: 8c2745a47b742ccc5f21f3302c39546edd361242
ms.sourcegitcommit: 6afca7cb4234d3a60111c5950e7855106ff97e56
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/23/2018
---
# <a name="environment-and-tenant-app-migration-through-packaging"></a>パッケージによる環境とテナントのアプリ移行
ある環境から別の環境に、パッケージでリソースを移行する方法について説明します。 移行は、同じテナント内の環境間、またはテナントの異なる環境間で行うことができます。

## <a name="the-scenario"></a>シナリオ
リソースを移行する必要のある 1 つの一般的な状況として、テストまたは開発用の環境と運用環境とを利用している場合があります。 開発者やテスト担当者には、環境内にあるアプリへの幅広いアクセス権があります。 実稼働環境に新しいアプリを移行する際には、環境は更新と変更のアクセス権を厳密に制御します。

別の状況として、各顧客が独自の環境とデータを持っているという場合があります。 新しい顧客が追加されたときに、新しい環境が顧客に対して作成され、それらの環境にアプリを移行します。

## <a name="which-resources-can-i-migrate-through-packaging"></a>どのリソースがパッケージで移行できるか
アプリをエクスポートするときに、アプリに依存するリソースもパッケージにエクスポートされます。  最初は、次の表に記載したように、可能性のある全てのリソース タイプのサブセットのみがサポートされます。

| リソースの種類 | サポート対象 | インポート オプション |
| --- | --- | --- |
| アプリ |はい |アプリを環境にインポートするのに 2 つのオプションがあります。 <ol><li><b>新規作成</b> – アプリは、パッケージがインポートされる環境で新しいアプリとして作成されます。</li> <li><b>更新</b> - このパッケージがインポートされるときに、アプリは既に環境に存在するため、更新を行います。</li></ol> |
| フロー |はい |フローを環境にインポートするのに 2 つのオプションがあります。 <ol><li><b>新規作成</b> – フローは、パッケージがインポートされる環境で新しいフローとして作成されます。</li> <li><b>更新</b> - このパッケージがインポートされるときに、フローは既に環境に存在するため、更新を行います。</li></ol> <b>注: </b>フローが依存するすべてのリソースは、エクスポートされるアプリ パッケージの中にも含まれますが、インポートされるパッケージと共に構成する必要があります。 |
| CDS エンティティのカスタマイズおよび候補リスト |はい |CDS のエンティティまたは候補リストを環境にインポートするのに 2 つのオプションがあります。 <ol><li><b>上書き</b> - 同じ名前のリソースがある場合、このインポートで置き換えられます。 一致するリソースがない場合は、新しいリソースが作成されます。 <li><b>マージ</b> – 同じ名前のエンティティまたは候補リストがある場合、新しいフィールドまたはエントリが追加されますが、欠けているフィールドまたはエントリは削除されません。</li></ol> |
| カスタム コネクタ |いいえ |アプリがカスタム コネクタに依存している場合、パッケージの一部としてコネクタをエクスポートすることは、現時点ではサポート<b>していません</b>。 <p></p> 独自のコネクタに依存しているアプリがあれば、現時点での唯一のオプションは、対象となる環境でコネクタを手動で再作成または更新し、パッケージをインポートするときに、そのコネクタを選択することです。 |
| 接続 |いいえ |アプリが接続 (資格情報を使用した SQL 接続など) に依存している場合は、パッケージの一部として接続や資格情報をエクスポートすることは、現在はサポートしていません。 <p></p> 共有の接続 (SQL など) に依存しているアプリがあれば、現時点での唯一のオプションは、対象となる環境で適切な資格情報を持った接続を手動で作成しなおして、パッケージをインポートするときにその接続を選択することです。 |
| CDS カスタム ロールとアクセス許可セット |いいえ |CDS カスタム ロールとアクセス許可セットのエクスポートもしくはその一方は、現時点ではサポートされていないため、現在の唯一のオプションは、対象となる環境でこれらのエンティティを手動で作成しなおすことです。 |
| ゲートウェイ |いいえ |ゲートウェイは、既定 (および {テナント名} (プレビューから) ) の環境でのみサポートされるため、エクスポート/移行はサポートされません。 |
| CDS データ行 |いいえ |CDS エンティティの行のエクスポートは、現時点ではサポートされていないため、現在の唯一のオプションは、CDS スキーマの変更が新しい環境に適用された後で、手動でデータを[エクスポートおよびインポート](data-platform-export-data.md)することです。 |

## <a name="how-do-i-get-access-to-packaging-for-my-app"></a>自分のアプリのパッケージングにはどのようにアクセスできますか?
アプリのエクスポート機能は、アプリの ”編集が可能” なアクセス許可を持つユーザーであれば使用できます。

アプリのインポート機能は、インポート先の環境で ”Environment Maker” のアクセス許可を持つユーザーであれば使用できます。

アプリをエクスポートまたはインポートするには、PowerApps Plan 2 または PowerApps Plan 2 の試用版ライセンスが必要です。

> [!NOTE]
> パッケージングがプレビューで提供されている間は、有効な PowerApps ライセンスを持つユーザーであれば誰でも、アプリと環境のパッケージングをお試しいただけます。

## <a name="exporting-an-app"></a>アプリのエクスポート
1. http://web.powerapps.com で、**[アプリ]** をクリックまたはタップし、移行するアプリの省略記号を選択してから、**[エクスポート (プレビュー)]** を選択します。
   
    ![エクスポートを選択](./media/environment-and-tenant-migration/select-export.png)
2. エクスポート パッケージ ページを開いて、パッケージの名前と説明を入力します。
   
    ![パッケージの詳細の確認](./media/environment-and-tenant-migration/package-details.png)
3. [パッケージ コンテンツの確認] セクション内で、必要に応じてコメントやメモを追加したり、パッケージのインポート時に各リソースをターゲット環境にインポートする方法に関して、設定を変更したりできます。
   
    ![パッケージの内容の構成](./media/environment-and-tenant-migration/export-package-content.png)

4. **[エクスポート]** を選択すると、数秒以内にパッケージ ファイルのダウンロードが開始されます。

## <a name="importing-an-app"></a>アプリのインポート
1. http://web.powerapps.com で、**[アプリ]** をクリックまたはタップし、**[パッケージのインポート (プレビュー)]** を選択します。
   
    ![インポートの選択](./media/environment-and-tenant-migration/select-import.png)
2. **[アップロード]** を選択し、インポートするアプリ パッケージ ファイルを選択します。
   
    ![パッケージ ファイルの選択](./media/environment-and-tenant-migration/select-file.png)
3. パッケージがアップロードされたなら、パッケージの内容を確認し、赤いアイコンでマークされたすべての項目を追加で入力する必要があります。これを行うには、各項目のレンチ アイコンを選択して、必要な情報を入力してください。
   
    ![パッケージの内容の確認](./media/environment-and-tenant-migration/import-package-content.png)
4. 必要な情報をすべて入力し終わったら、**[インポート]** を選択します。
   
    ![パッケージ化された内容の更新](./media/environment-and-tenant-migration/import-package-content-dirty.png)
5. インポートが完了すると、(下記のような) ページに自動的にリダイレクトされ、インポート操作の結果について概要が表示されます。
   
    ![インポート結果の確認](./media/environment-and-tenant-migration/import-results.png)

> [!NOTE]
>  アプリをインポートするときに既存のアプリの **[更新]** を選択すると、新しい変更はアプリケーションのドラフトとして保存されます。  アプリケーションの全ユーザーが利用できるように、それらの変更を[公開](http://powerapps.microsoft.com/tutorials/save-publish-app/#publish-an-app)する必要があります。
> 
> 

## <a name="known-limitations"></a>既知の制限
| 制限事項 | Status |
| --- | --- |
| 4 つ以上のリソースを含むアプリ パッケージのインポートは、完了するまでに数分かかることが報告されています。 |これは既知の問題で、修正プログラムがまもなく提供されます。 |

